<% layout('/layouts/boilerplate') -%>
<div id="map" class="cluster-map"></div>

<h1 class="text-center">All Campgrounds</h1>
<div class="row">
    <div class="col-md-12 offset-md-1">
    
    <!-- <div>
        <a href="/campgrounds/new" class="btn btn-dark">New campground</a>
    </div> -->
    <ul>
        <% for(let campground of campgrounds){ %>
            <div class="card d-inline-flex gap-2 bg-dark text-warning mb-1" style="width: 18rem;">
                <img crossorigin="anonymous" src="<%= campground.images[0].url %>" class="card-img-top" alt="<%= campground.title %>">
                <div class="card-body">
                    <h5 class="card-title">
                        <%= campground.title %>
                    </h5>
                    <p class="card-text">
                        <%= campground.description %>
                    </p>
                    <a href="campgrounds/<%= campground._id %>" class="btn btn-primary">More</a>
                </div>
            </div>
            <% } %>
    </ul>
    </div>
</div>

<script>
    const maptilerApiKey = '<%- process.env.MAPTILER_API_KEY %>';
    //Ignore this error 
    const campgrounds = {features:<%- JSON.stringify(campgrounds) %>};
</script>    
<script src="/javascripts/clusterMap.js"></script>